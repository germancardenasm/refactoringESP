function select_messages(e){var t=$(e).find(":selected").val();$("#with_messages input[type=checkbox]").each(function(){$(this).get(0).checked=!1}),"All"==t?checkboxes=$("#message_rows input[type=checkbox]"):"Unread"==t?checkboxes=$("#message_rows .unread input[type=checkbox]"):"Read"==t?checkboxes=$("#message_rows .read input[type=checkbox]"):"None"==t&&(checkboxes=""),checkboxes&&checkboxes.each(function(){$(this).get(0).checked=!0})}function with_selected_messages(e){""!=e&&($("#selected_action").val(e),$("#with_messages").submit())}function check_all(e,t){checkboxes=$("#"+t+" input[type=checkbox]"),checkboxes&&(0==e.get(0).checked?checkboxes.each(function(){$(this).get(0).checked=!1}):checkboxes.each(function(){$(this).get(0).checked=!0}))}function remove_element(e,t){e.parent("."+t).hide(),(hidden_input=e.prev("input[type=hidden]"))&&(hidden_input.value="1")}function add_element(e){template=eval(e),input_name=e+"s",$(input_name).append(replace_ids(template)),input_boxes=$("#"+input_name+" input"),input_boxes.each(function(){$(this).focus()}),GROW.onpageload()}function set_coupon_type(e){"attachment"==e.value||$("coupon_points").focus()}function update_profile_image(){$("#profile_image_update").fadeIn()}function createSpinner(){return $('<img src="https://dk1xgl0d43mu1.cloudfront.net/static_assets/images/spinner.gif" class="spinner" width="25" height="25" align="absmiddle">')}function preload_spinner(){var e=new Image;e.src="https://dk1xgl0d43mu1.cloudfront.net/static_assets/images/spinner.gif"}function ajax_pagination(e){var t=$("#"+e);t&&(preload_spinner(),t.off("click"),t.on("click",".pagination a",function(n){n.preventDefault();var o=$(this);o.parent(".pagination").append(createSpinner()),$.get(o.attr("href"),function(n){var o=$(n).filter("#"+e).first().html();t.html(o),$("html, body").animate({scrollTop:$("#"+e).offset().top-35},400)})}))}function show_popup(e,t,n,o){var a=screen.height/2-o/2,i=screen.width/2-n/2;share_popup=window.open(e,t,"toolbar=0,location=0,statusbar=0,menubar=0,resizable=0,width="+n+",height="+o+",top="+a+",left="+i)}function set_active_tab(e,t){$("."+t+" li a.active").removeClass("active"),$(e).addClass("active")}function enable_forms(){$(".submit input[disabled]").prop("disabled",!1),$(".submit .spinner").hide()}function Location(){function e(){return navigator.geolocation}function t(t){timeout=setTimeout(function(){GROW.modal.update("Could not find location.")},2e4);var a={timeout:1e4,maximumAge:1e4,enableHighAccuracy:!0};return e()?(c=t,l=navigator.geolocation.watchPosition(o,n,a),clearTimeout(timeout),!0):(console.log("Device not capable of geo-location."),t(!1),!1)}function n(e){switch(l&&navigator.geolocation.clearWatch(l),e.code){case e.TIMEOUT:navigator.geolocation.getCurrentPosition(a);break;case e.POSITION_UNAVAILABLE:navigator.geolocation.getCurrentPosition(a);break;case e.PERMISSION_DENIED:GROW.modal.update("You must share your location to use this feature.  Please check your browser settings to enable location sharing."),console.log("permission denied")}}function o(e){e.coords.accuracy<100&&(navigator.geolocation.clearWatch(l),a(e))}function a(e){r=e.coords.latitude,s=e.coords.longitude,c&&c(i())}function i(){return r&&s?{latitude:r,longitude:s}:(console.log("No location available. Try calling updateLocation() first."),!1)}var r,s,c,l;return{updateLocation:t,getLocation:i}}function GetURLParameter(e){for(var t=window.location.search.substring(1),n=t.split("&"),o=0;o<n.length;o++){var a=n[o].split("=");if(a[0]==e)return a[1]}}function iframe_links(){$("a").each(function(){var e=$(this);void 0==e.attr("href")||e.onclick||!(e.attr("href").indexOf("#")==-1||e.attr("href").indexOf("#")>0)||void 0!=e.attr("target")&&""!=e.attr("target")||e.attr("target","_top")})}function set_document_domain(){var e=document.domain,t=e.split(".").slice(0).length;if(t>=3){var n=t-2;document.domain=e.split(".").slice(n).join(".")}else document.domain=document.domain}function reload_api_frames(e){var t=["grow_user_bar_frame","grow_recent_forum_threads_frame","grow_rating_frame","merge_frame","grow_share_bar_frame"];"login"!=e&&"logout"!=e||t.splice(0,1),"rating"==e&&t.splice(2,1);var n=t.length;if(window.opener){try{window.opener.backfires_user_nav()}catch(e){}try{window.opener.postMessage({callback:"backfires_api_reload()"},"*")}catch(e){}var o=window.opener.parent}else{var o=window.parent;try{window.parent.postMessage({callback:"backfires_api_reload()"},"*")}catch(e){}}for(var a=0,i=n;a<i;++a)try{o.frames[t[a]]&&o.frames[t[a]].location.reload()}catch(e){}}jQuery.extend({getQueryParameters:function(e){return(e||document.location.search).replace(/(^\?)/,"").split("&").map(function(e){return e=e.split("="),this[e[0]]?"object"==typeof this[e[0]]?this[e[0]].push(e[1]):this[e[0]]=[this[e[0]],e[1]]:this[e[0]]=e[1],this}.bind({}))[0]}});var replace_ids=function(e){var t=(new Date).getTime();return e.replace(/NEW_RECORD/g,t)},show_create_album=function(){$("#create_photo_album").fadeIn(),$("#photo_album_title").delay(500).focus()};!function(GROW,$,undefined){var timeago_timer,loading_timer,time_zone="+0000",view_interval,url_checker,media_playing,visitor_active=!1,visitor_active_timeout,visible_timer;GROW.init=function(){GROW.onpageload(),GROW.modal.init(),GROW.info_panel.init(),GROW.set_document_bindings(),GROW.content.load_remote(),GROW.tracking.start_view_counter(),GROW.isMobile.any()||GROW.quickview.enable(),$("body.classic-templates.phone:not(#main_page, #event_spaces_page) #container").length&&$(document).scrollTop($(".phone:not(#main_page, #event_spaces_page) #container").offset().top),"undefined"!=typeof console&&console.log("GROW ready.")},GROW.set_document_bindings=function(){$(document).on("ajax:beforeSend","form[data-remote=true]",function(){try{$(this).find('input[type="submit"]').get(0).disabled=!0}catch(e){}try{$(this).find("img.spinner").show()}catch(e){}}).on("ajax:success",function(){GROW.onpageload()}).on("ajax:error","form[data-remote=true]",function(){}).on("ajax:complete","form[data-remote=true]",function(){try{$(this).find('input[type="submit"]').get(0).disabled=!1}catch(e){}try{$(this).find("img.spinner").hide()}catch(e){}}).on("ajax:beforeSend","a[data-remote=true]",function(){try{$(this).find(".fa-refresh,.fa-spinner").addClass("fa-spin")}catch(e){}}).on("ajax:complete","a[data-remote=true]",function(){try{$(this).find(".fa-refresh,.fa-spinner").removeClass("fa-spin")}catch(e){}}).ajaxComplete(function(e,t){var n=t.getResponseHeader("X-Message"),o=t.getResponseHeader("X-Message-Type");if(null!=n&&""!=n){var a="alert alert-"+("notice"==o?"success":"error"),i="fa fa-"+("notice"==o?"check-circle":"warning"),r='<div class="'+a+'"><a class="close" data-dismiss="alert">&#215;</a><div id="flash_notice"><i class="'+i+'"></i> '+n+"</div></div>";GROW.modal.is_displayed()?GROW.modal.flash(r):$(".flash-messages").hide().html(r).slideDown(),$(".btn-group.open").length&&$(".btn-group.open").removeClass("open")}GROW.datetime.format(),GROW.images.lazy_load(),GROW.content.label_content()}),$("body").on("click","[data-reset-form=true]",function(e){e.preventDefault(),$(this).parents("form").get(0).reset()}).on("click",".pagination[data-remote=true] a",function(e){return e.preventDefault(),$(this).attr("href",function(){return this.href.replace(".iframe","")}),$.rails.handleRemote($(this)),!1}).on("click",".panel.mobile-collapse .panel-heading",function(e){e.preventDefault();var t=$(this).parents(".panel");t.toggleClass("collapsed"),t.find(".collapse").collapse("toggle")}).on("click",".collapsible [data-toggle=collapse]",function(e){e.preventDefault();var t=$(this),n=$($(this).data("target")),o=t.parents(".collapsible");try{clearTimeout(visible_timer)}catch(e){}n.hasClass("in")?(o.addClass("collapsed"),n.removeClass("visible")):(o.removeClass("collapsed"),visible_timer=setTimeout(function(){n.addClass("visible")},1500))}).on("click","a[data-enable-field]",function(e){e.preventDefault(),$(this).next(".hide").find("[disabled]").removeClass("disabled").removeAttr("disabled").get(0).focus(),$(this).next(".hide").removeClass("hide"),$(this).parent().find("input").length&&$(this).parent().find("input").get(0).focus(),$(this).hide()}).on("click",".post_toggle",function(e){e.preventDefault(),$(this).children("i").toggleClass($(this).data("open")+" "+$(this).data("close")),$(this).nextAll(".forum_post_replies").slideToggle(500)}).on("click",".add_to_cart_link",function(){$(this).addClass("disabled")}).on("click","[data-toggle=dropdown]",function(e){e.preventDefault();var t=$(this).next(),n=t.width(),o=$(this).offset().left,a=n+o,i=$(window).width();a>i&&(o>n?$(this).parent().addClass("right-side"):t.css({left:"-"+o+"px"}))}).on("click",".carousel-control, .carousel-indicators [data-slide-to]",function(){var e=$(this).parents(".carousel");e.length?e.carousel("pause"):$(".carousel").carousel("pause")}).on("click",".comments .comments-load-more",function(){$(this).addClass("disabled"),$(this).find(".fa.hidden").removeClass("hidden")}).on("change","input.image:file",function(){var e=new FileReader,t=$(this).parents(".controls").find(".image_preview");this.files&&this.files[0]&&(e.onload=function(e){var n=t.find(".fancybox"),o=$("<img />");n.prop("href",e.target.result),o.attr("src",e.target.result),o.addClass("content_image"),t.data("object-type").length&&o.addClass("current-"+t.data("object-type")+"-image"),n.html(o)},e.readAsDataURL(this.files[0]),t.find("input.delete_image").val("0"),t.show())}).on("click",".remove-image",function(e){e.preventDefault();var t=$(this).parents(".image_preview");t.hide(),t.find("input.delete_image").val("1")}).on("change","input.file_preview:file",function(){$(this).parents(".controls").find(".file_name_preview").hide()}).on("click",".add_to_cart form a[data-action=wishlist]",function(e){e.preventDefault();var t=$(this).attr("href"),n=$(this).parents("form");n.data("remote")?n.attr("action",t).trigger("submit"):n.attr("action",t).get(0).submit()}).on("click",".selection_options .user.contest_option a.select_option",function(e){e.preventDefault();var parent=$(this).parent(),group_name=parent.data("selection-type");if($("."+group_name+"_selection_field_group:not(.destroy)").length<$("#contest_selection_fields").parents("form").data(group_name+"-limit")){var new_id=(new Date).getTime(),new_selection=eval(group_name+"_selection").replace(/NEW_RECORD/g,new_id).replace(/NEW_ID/g,parent.data("contest-option-id"));$("#contest_selection_fields").append(new_selection),$("#contest_entry_contest_selections_attributes_"+new_id+"_contest_option_id").val(parent.data("contest-option-id")),$("#contest_selections ."+group_name+"_selection.empty").first().replaceWith(parent)}}).on("click","#contest_selections .contest_option a.select_option",function(e){e.preventDefault();var t=$(this).parent(),n=t.data("selection-type");t.detach().appendTo("#"+n+"_options"),"bonus"==n?$("<li>",{"class":"user thumbnail span2 bonus_selection bonus empty"}).appendTo("#contest_selections"):$("<li>",{"class":"user thumbnail span2 contest_selection empty"}).insertBefore("#contest_selections .bonus"),$("#selection_option_"+t.data("contest-option-id")+' input[name*="destroy"]').length?($("#selection_option_"+t.data("contest-option-id")+' input[name*="destroy"]').val("true"),$("#selection_option_"+t.data("contest-option-id")).addClass("destroy")):$("#selection_option_"+t.data("contest-option-id")).remove()}).on("submit",".search_forms .form-search, .search_forms .order_by, .location-search",function(e){e.preventDefault();var t=this.action,n=$(this).children().not("input[name='layout']").serialize();t=t.split("?")[0],n.indexOf("remote=true")<0&&history.pushState({},"",t+"?"+n),$.get(t,$(this).serialize(),function(e){$(e).find(".map").length&&0==$(".map").length?window.location.href=t+"?"+n:($(e).attr("id")!==undefined?$("#"+$(e).attr("id")).replaceWith(e):$(e).filter("div[id]").length?$(e).filter("div[id]").each(function(){$("#"+$(this).attr("id")).html(this)}):($("#content > #page_header").length&&(e=$("#content > #page_header")[0].outerHTML+e),$("#content").html(e)),GROW.videojs.load(),GROW.map.init())})}).on("change",".order_by select",function(){$(this).parent("form").trigger("submit")}).on("click",".content-filters-nav a[data-content-filter]",function(e){e.preventDefault();var t=$(this),n=t.parents(".content-collection"),o=t.data("content-filter"),a=n.data("content-url"),i={content_filter:o,content_url:a,page:1};GROW.content_collections.load(n,i)}).on("submit",".content-filters .form-search",function(e){e.preventDefault();var t=$(this),n=t.parents(".content-collection"),o=t.serializeJSON();GROW.content_collections.load(n,o)}).on("click","#menu_item_image_toggle",function(e){e.preventDefault(),$("#icon_image, #custom_image").toggle()}).on("change","#menu_item_icon",function(){$(".menu_item_icon .input-append > .fa").removeClass().addClass("fa fa-"+this.value)}).on("click",".content_attachments a.edit-attachment",function(e){var t=$(this).parents(".attachment.control-group").find("input.position").val();e.originalEvent.currentTarget.href=$(this).attr("href")+"&attachment[postion]="+t}).on("change","#order_transaction_payment_type, #order_payment_type",function(){$.inArray($(this).val(),["check","cash","other","paypal"])!=-1?$(".cc_fields").hide():$(".cc_fields").show(),"paypal"==$(this).val()?$(this).parents(".order_payment_type").find(".help-block").text("After submitting, you will be redirected to PayPal to complete your order.").show():$(this).parents(".order_payment_type").find(".help-block").text("").hide()}).on("change","#message_to",function(){$("#message_all_friends").prop("checked",!1)}).on("click",".change_count_value",function(e){e.stopImmediatePropagation(),e.preventDefault();var t=$(this).parents(".control-group").find("input"),n=parseInt($(this).data("change")),o=parseInt(t.val());t.val(o+n)}).on("change","select[data-event-gear-class]",function(){var e=$(this),t=e.val();if("Other"==t)$(".control-group.gear_custom_vehicle").show(),$(".control-group.gear_model, .control-group.gear_year").hide(),$("#gear_custom_vehicle").get(0).focus();else if(""!=t){$(".control-group.gear_custom_vehicle").hide(),$(".control-group.gear_model, .control-group.gear_year").show();var n=e.data("event-gear-class"),o=e.data("gear-type-id"),a=$("select.gear_model");$.getJSON("/event_gears.json",{event_class:n,gear_type_id:o,manufacturer:t},function(e){a.empty();var t='<option value=""></option>';$.each(e,function(){t+='<option value="'+this.model+'">'+this.model+"</option>"}),a.select2("destroy").append(t).select2({allowClear:!0})})}}).on("click","body.guest #chat_message_message",function(){GROW.modal.show("/login",{title:"Log In"})}).on("click","form.new_product_design .form-actions button",function(e){GROW.user.logged_in()||(e.preventDefault(),GROW.modal.show("/login",{title:"Log In"}))}).on("change",".checkin_report_registration_type #event_registration_type_id",function(){var e=$(this).parents("form");"3"==$(this).val()?($(".control-group.checkin_report_type").hide(),$(".control-group.checkin_report_session").hide(),e.find(".checkin_report_type select option").removeAttr("selected"),e.find(".checkin_report_type select option:first-child").attr("selected","selected").trigger("change"),e.find(".checkin_report_session select option").removeAttr("selected"),e.find(".checkin_report_session select option:first-child").attr("selected","selected").trigger("change")):($(".control-group.checkin_report_type").show(),$(".control-group.checkin_report_session").show())}).on("change","form.auto_submit",function(){$(this).submit()}).on("click",".modal form a.cancel",function(e){e.preventDefault(),GROW.modal.hide()}).on("change",".featured_option",function(){var e=$(this).parents(".featured_content").find(".featured_dates");$(this).get(0).checked?e.show():e.hide()}).on("change",".fundable_option",function(){var e=$(this).parents(".fundable_content").find(".fundable_fields");$(this).get(0).checked?e.show():e.hide()}).on("change",".registration_option",function(){var e=$(this).parents("form").find(".registration_content");$(this).get(0).checked?e.show():e.hide()}).on("change",".checkin_option",function(){var e=$(this).parents(".checkin_content").find(".checkin_dates");$(this).get(0).checked?e.show():e.hide()}).on("click","form .add_element",function(e){e.preventDefault(),e.stopImmediatePropagation();var new_id=(new Date).getTime(),$this=$(this),template=eval($this.data("template")).replace(/NEW_RECORD/g,new_id);if($this.parents(".input_group").length)var $input_group=$this.parents(".input_group").find($this.data("add-to"));else var $input_group=$($this.data("add-to"));$input_group.append(template),$input_group.find("input").not("[type=hidden]").focus(),GROW.onpageload()}).on("click","form .remove_element",function(e){e.preventDefault();var t=$(this);t.parents("form").trigger("change");if(""!==t.data("field-group"))var n=t.parents(t.data("field-group"));else var n=t.parents(".control-group");var o=n.find("input[type=hidden][name*='_destroy']");o.length?(o.val("1"),n.hide()):n.remove(),t.parents("form").trigger("change")}).on("click","#search_results .search-tabs a:not(.dropdown-toggle), #search_results .pagination a",function(e){e.preventDefault();var t=$(this),n=t.parent("li");n.parent("ul").find("li.active").removeClass("active"),n.addClass("active"),$.ajax({url:$(this).attr("href"),dataType:"script",cache:!1})}).on("change","form.new_coupon_code #coupon_code_generate_length, form.new_coupon_code #coupon_code_generate_type",function(){var e=$(this).parents("form.new_coupon_code");$("#code_preview").load("/admin/coupon_codes/new/preview",e.serialize())}).on("change","#coupon_code_email_coupon_code",function(){$(this).get(0).checked?$(".email_field_details").show():$(".email_field_details").hide()}).on("blur","input[type=email]",function(){var e=$(this);""!=e.val()&&e.mailcheck({suggested:function(t,n){var o=e.parents(".control-group"),a=o.find(".controls");if(a.find(".help-block").length)var i=a.find(".help-block");else if(a.find(".help-inline").length)var i=a.find(".help-inline");else{var i=$("<p/>").addClass("help-inline");a.append(i)}i.html('<span class="email_suggestion">Did you mean <a href="#" class="suggested_email">'+n.full+"</a>?</span>")},empty:function(){var t=e.parents(".control-group");t.find(".email_suggestion").remove()}})}).on("click",".controls a.suggested_email",function(e){e.preventDefault();var t=$(this),n=t.parents(".controls").find("input");n.val(t.html()).trigger("blur")}).on("click","#set_publish_time a",function(e){e.preventDefault();var t=$(this).parents(".control-group");t.next(".publish_dates").toggle()}).on("click",".load_history a.next-page",function(e){e.preventDefault();var t=$(this).parent(".load_history");$.get($(this).attr("href")+"&layout=none",function(e){var n=t.parents(".chat_messages"),o=n.get(0).scrollHeight-t.parents(".chat_messages").scrollTop();t.before(e),t.hide(),n.scrollTop(n.get(0).scrollHeight-o),GROW.onpageload()})}).on("change","select[data-other-input]",function(){var e=$(this);e.val()&&"other"==e.val().toLowerCase()?($('<input type="text" name="'+e.attr("name")+'" value="" class="select_other_input" />').insertAfter(e),e.next("input.select_other_input").focus()):e.next("input.select_other_input").remove()}).on("change",".field_style_user_single_checkbox",function(){$field=$(this),!GROW.user.logged_in()&&$field.hasClass("required")&&$field.prop("checked",!0),$user_fields=$(".user_checkbox_fields"),$field.get(0).checked?$user_fields.show():$user_fields.hide()}).on("change",".content_release_select",function(){""!=$(this).select2("val")?$(this).parents("form").find("input.publish_at, input.unpublish_at").prop("disabled",!0):$(this).parents("form").find("input.publish_at, input.unpublish_at").prop("disabled",!1)}).on("change","#gear_gear_type_id",function(){"Vehicle"==$("#gear_gear_type_id option:selected").text()?($(".vehicle_entry").show(),$(".model_entry").hide()):($(".vehicle_entry").hide(),$(".model_entry").show())}).on("change","#gear_vehicle",function(){$(this).val()?($(".control-group.gear_custom_vehicle").hide(),$(".control-group.gear_year").hide()):($(".control-group.gear_custom_vehicle").show(),$(".control-group.gear_year").show())}).on("change",".checkout_form form.edit_order .order_addresses :input, .checkout_form form.edit_order .order_item input, .checkout_form form.edit_order #order_user_attributes_create_member_profile",function(e){GROW.checkout.update(e)}).on("click",".checkout_form .order_coupon_code button",function(e){e.preventDefault(),GROW.checkout.update(e)}).on("change","form#new_order_item #order_options select",function(){var e=$("form#new_order_item #order_options").find("select").filter(function(){return""===this.value});e.length||$("form#new_order_item").find('button[type="submit"]').prop("disabled",!1)}).on("change","#user_profile_display_company",function(){this.checked?$(this).parents("form").find(".user_profile_nickname").hide():$(this).parents("form").find(".user_profile_nickname").show()}).on("change",".add_to_cart .product_option",function(e){e.stopImmediatePropagation();var t=$(this).parents("form");$.ajax({type:"POST",url:"/products/"+t.find("#item_id").val()+"/option",data:t.serialize(),dataType:"script"})}).on("change","#event_registration_user_id, #event_registration_event_session_id, #event_registration_event_registration_type_id, #event_registration_partner_user_id, #event_registration_gear_id, #event_registration_user_location_id, #order_item_item_id",function(e){e.stopImmediatePropagation();var t=setTimeout(function(){GROW.modal.loading()},500);return $.ajax({type:"POST",url:$(this).parents("form").data("update-url"),data:$(this).parents("form").serialize(),dataType:"script"}).always(function(){GROW.modal.loading(!1),clearTimeout(t)}),!1}).on("change","#attachment_attachable_type, #attachment_attachable_id, #attachment_display, #attachment_title, #attachment_link_to",function(e){e.stopImmediatePropagation(),"attachment_attachable_type"==$(e.currentTarget).attr("id")&&$("#attachment_attachable_id").select2("val","");var t=setTimeout(function(){GROW.modal.loading()},500);return $.ajax({url:$(this).parents("form").data("update-url"),data:$(this).parents("form").serialize(),dataType:"script"}).always(function(){GROW.modal.loading(!1),clearTimeout(t)}),!1}).on("click",".media-body .dropdown-toggle",function(){var e=$(this).parent("div");if(e.hasClass("open"))e.removeAttr("style");else{var t=e.position();e.css({position:"absolute",left:t.left,top:t.top})}}).on("change","#event_registration_event_id",function(){var e=$(this).val(),t=$("#event_registration_event_session_id");$.getJSON("/admin/events/"+e+"/event_sessions.json",function(e){t.empty();var n='<option value=""></option>';$.each(e,function(e,t){n+='<option value="'+t.id+'">'+t.title+"</option>"}),t.select2("destroy").append(n).select2({allowClear:!0})}),$("input#event_registration_transfer_id").length&&($("input#event_registration_transfer_id").data("event-id",e),$("input#event_registration_transfer_id").select2("enable"))}).on("change","#event_event_type",function(){"Other"==$(this).val()&&($("#event_event_type").replaceWith('<input type="text" name="event[event_type]" id="event_event_type" style="width: 250px;">'),$("#event_event_type").select())}).on("change","#order_item_item_type",function(){var e=$(this).parents(".form-inputs").find("#order_item_item_id");e.attr("data-type",$(this).val()),"EventRegistration"==$(this).val()||"EventSpace"==$(this).val()?e.attr("data-include-fields","event_name,session_name"):e.removeData("data-include-fields")}).on("click","a.location_lookup",function(e){e.preventDefault(),$(".location-search .location_lookup").html("Locating...");var t=$(this).parents("form").find("#within");Location().updateLocation(function(e){e?(GROW.user.logged_in()&&$.post("/user_locations",{"user_location[lat]":e.latitude,"user_location[lng]":e.longitude},function(){},"script"),t.length?window.location="?within="+t.val()+"&lat="+e.latitude+"&lng="+e.longitude:window.location="?lat="+e.latitude+"&lng="+e.longitude):$(".location-search .location_lookup").hide()})}).on("click",".config_option_select .config_option a, .config_option_select .config_option_clear",function(e){e.preventDefault();var t=$(this).data("type-id"),n=$("#config_type_fields_"+t),o=n.find("img"),a=$(this).data("full-image");$("#config_type_"+t+" .config_option").removeClass("selected"),$(this).parents(".config_option").addClass("selected"),n.find("input.option_id").val($(this).data("option-id")),o.length&&o.fadeOut(400,function(){a?o.attr("src",a).fadeIn(400):o.removeAttr("src")}),$(this).data("price")!=n.data("option-price")&&(n.data("option-price",$(this).data("price")),GROW.product_designs.update_price()),$(this).data("children")&&$.each($(this).data("children"),function(e,t){$("#config_type_fields_"+e+" img").fadeOut(400),$("#config_type_fields_"+e+" input.option_id").val(""),$("#config_type_fields_"+e+" img").removeAttr("alt"),$("#config_type_fields_"+e+" img").removeAttr("src"),$("#config_type_"+e+"_options").slideToggle(400,function(){$("#config_type_"+e+"_options").load(t,function(){$("#config_type_"+e+"_options").slideToggle(400)})})})}).on("change","#configure_model",function(){window.location.replace($(this).find("option:selected").data("path"))}).on("change","select.url_select",function(){var e=$(this).find("option:selected").val();e+=window.location.search.substring(),window.location.replace(e)}).on("click","[data-toggle-editor]",function(e){e.preventDefault();var t=$(this),n=t.data("target-id"),o=$("#"+t.data("target-id"));o.hasClass("code-mirror")?(GROW.code_editor.remove(o),o.removeClass("code-mirror"),o.addClass("tinymce").addClass("mceEditor"),GROW.editor.init(),t.html("Code Editor")):(o.hasClass("tinymce")&&(GROW.editor.remove("#"+n),o.removeClass("tinymce").removeClass("mceEditor")),GROW.code_editor.init(o.get(0)),o.addClass("code-mirror"),t.html("Rich-text Editor"))}).on("click",".content_toggle",function(e){e.preventDefault(),$("#"+$(this).data("element")).slideToggle("fast"),$(this).find("i").toggleClass("fa-caret-down fa-caret-right")}).on("change","input#order_user_attributes_email",function(){var e=$(this).parent();$.get("/users/login_checker?login="+$(this).val(),function(t){e.find(".login_check_message").remove(),t.length?(e.parent().hasClass("error")||e.parent().addClass("error"),e.find(".help-inline").length||e.append('<span class="help-inline"></span>'),e.find(".help-inline").append(t)):e.parent().removeClass("error")})}).on("change","#order_user_attributes_create_member_profile",function(){$(this).get(0).checked?($("#order_profile_fields").show(),$("#order_profile_fields :input").attr("disabled",!1)):($("#order_profile_fields").hide(),$("#order_profile_fields :input").attr("disabled",!0))}).on("change","#signup.email-signup #user_create_member_profile",function(){$fields=$(this).parents(".email-signup").first().find(".active_user_fields"),$(this).get(0).checked?($fields.slideDown(),$(".control-group.user_email .help-block").css("visibility","visible"),$fields.find(":input").attr("disabled",!1)):($fields.slideUp(),$(".control-group.user_email .help-block").css("visibility","hidden"),$fields.find(":input").attr("disabled",!0))})},GROW.placeholder_labels=function(e){$(e+" form label").each(function(){var e=$(this).parent().find("#"+$(this).attr("for"));e.length&&(e.attr("placeholder")?e.attr("data-placeholder",e.attr("placeholder")):e.attr("placeholder",$(this).html().replace('<abbr title="required">*</abbr> ',"").replace(/(<([^>]+)>?)/,"")))})},GROW.loading=function(){$("body").modalmanager("loading")},GROW.login_cleanup=function(){if($("#user_sessions_page").length&&(window.location="/account"),window.opener&&$("body").is("#popup")){try{set_document_domain()}catch(e){}try{reload_api_frames()}catch(e){}try{window.opener.location.reload()}catch(e){}try{window.close()}catch(e){}return!1}$("body.guest").length&&($("#user_bar").length&&GROW.user.update_user_bar(),$("*[data-reload=true]").length&&($(".event_session").length?location.reload(!0):$("*[data-reload=true]").each(function(){$(this).load(window.location.pathname+"?layout=none #"+$(this).attr("id")+" > *")})),$("#signup_form").hide(),$("#login_form").hide(),$(".signup-form, .login-form, .anonymous").hide(),$(".network_login.btn").hide(),$(".hide_user_only").show(),$("body").removeClass("guest"))},GROW.logout_cleanup=function(){$("#user_bar").length&&GROW.user.update_user_bar(),$("#signup_form").show(),$("#login_form").show(),$(".signup-form, .login-form, .anonymous").show(),$(".network_login.btn").show(),$(".hide_user_only").hide()},GROW.auto_submit_post=function(){$("#comment_form").length&&""!=$("#comment_body").val()&&$("#comment_form").children("form input[type=submit]").click(),$("#reply_form").length&&""!=$("#forum_post_description").val()&&$("#reply_form").children("form input[type=submit]").click()},GROW.enable_buttons=function(){$(".submit input[disabled]").prop("disabled",!1)},GROW.hide_spinners=function(){$(".submit .spinner").hide()},GROW.remove_user_quickview=function(e){$("#quickview_"+e).remove()},GROW.onpageload=function(){GROW.images.lazy_load(),GROW.content.label_content(),GROW.map.init();try{$("textarea.mceEditor").length&&tinymce_init!=undefined&&(tinymce.remove("textarea.mceEditor"),$("textarea.mceEditor").tinymce(tinymce_init),$(document).on("focus","textarea.tinymce-dynamic",function(){tinymce_init.auto_focus=$(this).attr("id"),$(this).tinymce(tinymce_init)}))}catch(e){}if($("img").error(function(){try{if($(this)[0].src.indexOf("large.")!=-1){var e=$(this);"undefined"!=typeof e.attr("data-src")&&e.attr("data-src",e.attr("data-src").replace(/\/x?large\./i,"/medium.")),e.attr("src",e[0].src.replace(/\/x?large\./i,"/medium."))}}catch(e){}}),$("input#user_profile_profile_url").keyup(function(){clearTimeout(url_checker),url_checker=setTimeout(function(){$.get("/users/profile_url_checker?id="+$("input#user_profile_profile_url").val(),function(e){$("#url_checker").html(e)})},300)}),$("input.daterange_picker").daterangepicker({applyClass:"btn-primary",ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"Last 90 Days":[moment().subtract(89,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"This Year":[moment().startOf("year"),moment().endOf("year")],"Last Year":[moment().subtract(1,"year").startOf("year"),moment().subtract(1,"year").endOf("year")]},format:"MMMM D, YYYY"},function(){$(this.element).parents("form").trigger("change")}),$(".report_daterange_picker").each(function(){var e="YYYY-MM-DD hh:mm A",t=$(this).parent(".date_range_select"),n='input[name="'+$(this).data("from")+'"]',o='input[name="'+$(this).data("to")+'"]',a=t.find(n),i=t.find(o),r=moment(),s=moment(),c=$(this).data("opens")||"left",l=$(this).data("time");"undefined"==typeof l&&(l=!0);var d=$(this).data("min-date"),u=$(this).data("max-date"),p=$(this).data("label-format");"undefined"==typeof p&&(p="MMMM D, YYYY",l&&(p+=" h:mm A")),a.val().length&&(r=moment(a.val(),e)),i.val().length&&(s=moment(i.val(),e));var _={Today:[moment().startOf("day").format("YYYY-MM-DD hh:mm A"),moment().endOf("day").format("YYYY-MM-DD hh:mm A")],Yesterday:[moment().startOf("day").subtract(1,"days").format("YYYY-MM-DD hh:mm A"),moment().endOf("day").subtract(1,"days").format("YYYY-MM-DD hh:mm A")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"Last 90 Days":[moment().subtract(89,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"This Year":[moment().startOf("year"),moment().endOf("year")],"Last Year":[moment().subtract(1,"year").startOf("year"),moment().subtract(1,"year").endOf("year")]};l&&(_=Object.assign({"Last Hour":[moment().subtract(1,"hour").format("YYYY-MM-DD hh:mm A"),moment()]},_)),$(this).daterangepicker({format:e,opens:c,applyClass:"btn-primary",alwaysApply:!0,timePicker:l,timePickerIncrement:1,timePicker12Hour:!0,ranges:_,minDate:d,maxDate:u,startDate:r,endDate:s},function(e,t){var a=$(this.element).parent(".date_range_select");a.find(".picker_label").html(e.format(p)+" - "+t.format(p)),a.find(n).val(e.format("YYYY-MM-DD hh:mm A")),a.find(o).val(t.format("YYYY-MM-DD hh:mm A")),a.find(o).parents("form").trigger("change")})}),$("input.datetime_picker").daterangepicker({format:"MMMM D, YYYY hh:mm A",showDropdowns:!0,
alwaysApply:!0,timePicker:!0,timePickerIncrement:1,timePicker12Hour:!0,singleDatePicker:!0},function(){$(this.element).trigger("change")}),$("input.date_picker").daterangepicker({format:"MMMM D, YYYY",showDropdowns:!0,timePicker:!1,alwaysApply:!0,singleDatePicker:!0},function(){$(this.element).trigger("change")}),GROW.user.logged_in()){var e=$("form [data-user-field]");e.length&&$.getJSON("/account.json",function(t){GROW.user.profile=t.profile,e.each(function(){var e=$(this);""==e.val()&&(e.val(GROW.user.profile[e.data("user-field")]),e.hasClass("select2-offscreen")&&e.select2())})}),$(".field_row_user_single_checkbox").length&&($(".field_row_user_single_checkbox").find(".field_style_user_single_checkbox").prop("checked",!1),$(".user_checkbox_fields").hide(),$(".field_row_user_single_checkbox").hide())}GROW.tabs.init(),$("a.fancybox").fancybox(),$("a.fullscreen").fancybox({type:"ajax"}),GROW.datetime.format(),$("body #main").fitVids(),$("[data-toggle=tooltip]").tooltip(),$("[data-toggle=popover]").popover();var t=window.location.pathname+window.location.search;$("ul.nav li a").not(".admin_breadcrumb ul.nav li a, .section-nav .nav a, .content-filters-nav li a").each(function(){var e=$(this);e.parent("li").hasClass("dropdown")||(t.length>1&&t==e.attr("href")?e.parent("li").addClass("active"):e.parent("li").removeClass("active"))}),$(".carousel-inner").swipe({swipeLeft:function(){$(this).parent().carousel("next")},swipeRight:function(){$(this).parent().carousel("prev")}}),$(window).load(function(){$(".carousel:not(.no-resize)").each(function(){var e=new Array;if($(this).find(".item").each(function(){e.push($(this).outerHeight(!0))}),0!==e.length){var t=Math.min.apply(Math,e),n=Math.max.apply(Math,e);t!=n&&$(this).find(".item").height(n)}})}),$(".comment .body").shorten({showChars:500,minHideChars:50,moreText:"read more",lessText:""}),$(".forum_post_replies .forum_post .body.shorten").shorten({showChars:750,minHideChars:50,moreText:"read more",lessText:""}),$(".review .body").shorten({showChars:500,minHideChars:50,moreText:"read more",lessText:""}),GROW.select.load(),$("#photo_display").length&&$(document.documentElement).keyup(function(e){e.stopImmediatePropagation(),37==e.keyCode?$("a[rel~=prev]")[0].click():39==e.keyCode&&$("a[rel~=next]")[0].click()}),$("#photo_display").length&&history&&history.pushState&&($(window).on("popstate",function(e){e.stopImmediatePropagation();try{e.originalEvent.state&&"photo"==e.originalEvent.state.type&&($("#photo_display").length?GROW.photo.display(e.originalEvent.state.url):window.location=e.originalEvent.state.url)}catch(e){}}),$("#photo_display a[rel=prev], #photo_display a[rel=next], .photo_strip a").click(function(e){e.preventDefault(),GROW.photo.display($(this)[0].href)})),$("a[rel=next][data-photo-src]").each(function(){$("<img/>")[0].src=$(this).data("photo-src")}),$("#grow-modal input.rating").rating($(this).data());var n=$("ul.nav.organize").sortable({group:"nav",nested:!1,vertical:!1,exclude:".divider-vertical",onDragStart:function(e,t,n){e.find("ul.dropdown-menu").sortable("disable"),n(e,t)},onDrop:function(e,t,o){e.find("ul.dropdown-menu").sortable("enable"),$("#menu_item_order").val("["+n.sortable("serialize").get().join("-")+"]"),o(e,t)},serialize:function(e,t,n){var o="";if(n)o=t.join(",");else{var a=e.data("menu"),i=e.find("> ul.dropdown-menu");o=i.length?"["+a+",["+i.sortable("serialize").get()+"]]":e.data("menu")}return o}});$("ul.nav.organize ul.dropdown-menu").sortable({group:"nav"}),$(".attachment-choices").sortable({containerSelector:".attachment-choices",itemPath:"> .choices",itemSelector:"div.attachment",placeholder:'<div class="control-group position_content attachment placeholder"/>',handle:".handle",nested:!1,onDrop:function(e,t,n){$(".attachment-choices").sortable("serialize"),e.parents("form").trigger("change"),e.find("input.position").trigger("change"),n(e,t)},serialize:function(){$(".attachment-choices").find(".control-group.attachment").each(function(e){$(this).find("input.position").val(e+1)})}}),$(".product_variants").sortable({containerSelector:".product_variants",itemPath:"> #product_variant_types",itemSelector:"div.position_content",placeholder:'<div class="control-group position_content product_variant_type placeholder"/>',handle:".handle",nested:!1,onDrop:function(e,t,n){$(".product_variants").sortable("serialize"),n(e,t)},serialize:function(){$(".product_variants").find(".control-group.position_content").each(function(e){$(this).find("input.position").val(e+1)})}}),$(".order .form_fields").sortable({containerSelector:".form_fields",itemSelector:".order_form_field",placeholder:'<div class="order_form_field control-group placeholder"/>',handle:".handle",nested:!1,onDrop:function(e,t,n){$(".order .form_fields").sortable("serialize"),n(e,t)},serialize:function(){$(".order .order_form_field input.position").each(function(e){$(this).val(e+1)})}}),$(".countdown").each(function(){var e=GROW.datetime.get_moment($(this).attr("datetime")),t=e.toDate(),n=$(this).data("target"),o=$(this).data("url"),a={targetDate:{day:t.getDate(),month:t.getMonth()+1,year:t.getFullYear(),hour:t.getHours(),min:t.getMinutes(),sec:t.getSeconds()},omitWeeks:!0,onComplete:function(){$(n).length&&""!=o&&($("html, body").animate({scrollTop:$(n).offset().top-50},1e3),$(n).slideUp("slow",function(){$(this).load(o).delay(1e3).slideDown(1e3)}))}};$(this).countDown(a),"0"==$(this).find(".days_dash > .digit").first().text()&&$(this).find(".days_dash > .digit").first().hide()}),$(".counter").each(function(){var e=new Date($(this).data("date")),t=$(this).data("target"),n=$(this).data("url"),o=$(this).data("refresh"),a=$(this).data("format"),i=$(this).data("hide"),r=$(this).data("show"),s=($(this).data("streamsetup"),$(this).data("player")),c=function(){"undefined"!=typeof o&&o?setTimeout(function(){window.location.reload()},1e3*Math.floor(10*Math.random()+1)):"undefined"!=typeof n&&""!=n?$(t).length?($("html, body").animate({scrollTop:$(t).offset().top-50},1e3),$(t).slideUp("slow",function(){$(this).load(n,function(){GROW.onpageload()}).delay(1e3).slideDown(1e3)})):window.location.href=n:($(i).length&&$(i).slideUp().remove(),$(r).length&&($(s).length&&$(s).data("settings")?$(r).slideDown("slow",function(){GROW.videojs.load()}):$(r).slideDown("slow")))},l={until:e,format:a,alwaysExpire:!0,onExpiry:function(){c()}};$(i).length&&$(i).show(),$(r).length&&$(r).hide(),$(this).countdown(l)}),$("a.print-preview").printPreview(),$("#product_carousel").each(function(){if($(this).data("width")){var e=$(this).width()/$(this).data("width"),t=$(this).data("height")*e;$(this).find(".item").css("min-height",t)}}),$(".easyzoom").each(function(){var e=$(this).data("zoom-container");$(this).easyZoom({container:e})}),GROW.videojs.load()},GROW.scroll_to={top:function(){$("html, body").animate({scrollTop:0},1e3)},target:function(e){$("html, body").animate({scrollTop:$(e).offset().top-50},1e3)}},GROW.content={load_remote:function(){$(".content-collection[data-remote=true]").each(function(){var e=$(this);e.data("loaded")||GROW.content_collections.load(e)})},label_content:function(){GROW.content.label_new_content(),GROW.content.label_updated_content()},label_new_content:function(){if(GROW.content.new_label_start_date){var e=moment(GROW.content.new_label_start_date);$(".content-item[data-created-at]").each(function(){var t=$(this).data("created-at"),n=moment(t).isAfter(e);n&&$(this).addClass("label-new")})}},label_updated_content:function(){if(GROW.content.updated_label_start_date){var e=moment(GROW.content.updated_label_start_date);$(".content-item[data-updated-at]:not(.label-new)").each(function(){var t=$(this).data("updated-at"),n=moment(t).isAfter(e);n&&$(this).addClass("label-updated")})}},order_select:function(e,t){e!=t.data("type")&&t.length&&(t.select2("val",""),t.empty(),t.append(new Option("","",!1,!1)),$.each(t.data("order-options")[e],function(e,n){t.append(new Option(n[0],n[1],!1,!1))}),t.data("type",e))}},GROW.datetime={time_zone:function(e){return"undefined"==typeof e?time_zone:(time_zone=e,void GROW.datetime.format())},get_moment:function(e,t,n){return"undefined"==typeof n&&(n=GROW.datetime.time_zone()),moment(e,t).utcOffset(n)},format:function(e){var t="MMMM D, YYYY [at] h:mm A";"undefined"==typeof e&&(e="time.datetime"),$(e).each(function(){var e=$(this),n=e.attr("datetime"),o=e.data("tz-offset"),a=GROW.datetime.get_moment(n,null,o),i=GROW.datetime.format_datetime(a,e.data("format"));e.attr("title",a.format(t)).html(i)}),GROW.datetime.timeago_timer()},format_datetime:function(e,t){var n,o="MMMM D, YYYY [at] h:mm A";switch(t){case"timeago":n=e.fromNow();break;case"medium":n=e.format("MMMM D, YYYY");break;case"medium_at":n=e.format("MMMM D, YYYY [at] h:mm A");break;case"formal":n=e.format("MM/DD/YYYY h:mm A");break;case"formal_at":n=e.format("MM/DD/YYYY [at] h:mm A");break;case"formal_on":n=e.format("h:mm A [on] MM/DD/YYYY");break;case"countdown":n=e.format("YYYY/MM/DD HH:mm:ss");break;case"month":n=e.format("MMMM");break;default:n=e.format(o)}return n},timeago:function(){GROW.datetime.format("time.timeago"),GROW.datetime.timeago_timer()},timeago_timer:function(){clearTimeout(timeago_timer),timeago_timer=setTimeout(function(){GROW.datetime.format("time.timeago")},6e4)}},GROW.user={logged_in:function(){return!$("body").hasClass("guest")},update_user_bar:function(){$("#user_bar").length&&$.get("/account/user_bar.js")},profile:{},load_data:function(){GROW.user.logged_in()&&GROW.user.profile.user_id==undefined&&$.getJSON("/account.json",function(e){GROW.user.profile=e.profile})}},GROW.photo={display:function(e){var t=e.indexOf("?")!==-1?"&":"?",n=e+t+"photo_display=1";$.ajax({url:n,cache:!0,dataType:"html",success:function(t){$("#photo_display").replaceWith(t),history.pushState({type:"photo",url:e},"",e),GROW.editor.init(),GROW.onpageload(),$("a[rel=next][data-photo-src]").each(function(){$("<img/>")[0].src=$(this).data("photo-src")}),$("#photo_display .photo img").error(function(){$(this).unbind("error").attr("src",$(this)[0].src.replace(/\/(xlarge|large)\./,"/medium."))})}}),$("#manage_links .edit").length&&($("#manage_links .edit")[0].href=e+"/edit"),$("#manage_links .delete").length&&($("#manage_links .delete")[0].href=e)}},GROW.onpageunload=function(){$(".counter").countdown("destroy")},GROW.loading_timer=function(e,t){"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=500),e?loading_timer=setTimeout(function(){GROW.modal.loading()},t):(clearTimeout(loading_timer),GROW.modal.loading(!1))},GROW.push={init:function(e){GROW.push.is_connected()||(GROW.push.client=new Faye.Client(e),console.log("Push ready."))},is_connected:function(){return"undefined"!=typeof GROW.push.client}},GROW.modal={init:function(){$.fn.modalmanager.defaults.resize=!0,GROW.$modal=$("<div/>",{id:"grow-modal","class":"modal fade",tabindex:-1}).appendTo($("body")),$(document).on("click","[data-modal=true]",function(e){e.preventDefault(),"wide"==$(this).data("modal-style")?GROW.$modal.addClass("wide"):GROW.$modal.removeClass("wide"),GROW.modal.show($(this).attr("href"),{title:$(this).attr("title")})})},load:function(e,t){t=t||{};var n=e.indexOf("?")!==-1?"&":"?",o=setTimeout(function(){GROW.modal.loading()},750);GROW.$modal.load(e+n+"layout=modal",function(){t.title&&GROW.modal.title(t.title),t.flash?GROW.modal.flash(t.flash):GROW.modal.clear_flash(),GROW.modal.loading(!1),clearTimeout(o),GROW.$modal.modal("show"),$("#modal_body.internet_explorer select").addClass("no-select2").css("height","auto").css("visibility","visible"),GROW.onpageload(),GROW.placeholder_labels("#grow-modal"),setTimeout(function(){0!=$("#grow-modal #login_tabs .signup.active").length?$("#grow-modal form#new_user #user_name").focus():$("#grow-modal form [autofocus]").focus()},650)})},loading:function(e){e="undefined"==typeof e||e,e?0!=GROW.$modal.height()&&"none"!=GROW.$modal.css("display")||$("body").modalmanager("loading"):$("body").modalmanager("removeLoading").removeClass("modal-open page-overflow")},title:function(e){GROW.modal.stage(),GROW.$modal.find(".modal-header > h3").html(e)},flash:function(e){GROW.modal.stage(),GROW.$modal.find(".modal-flash").hide().html(e).slideDown()},clear_flash:function(){GROW.$modal.find(".modal-flash").html("")},body:function(e,t){t=t||{},t.title&&GROW.modal.title(t.title),t.flash&&GROW.modal.flash(t.flash),GROW.modal.stage(),GROW.$modal.find(".modal-body").html(e)},clear:function(e,t){t=t||{},GROW.modal.title(""),GROW.modal.body(""),GROW.modal.clear_flash()},stage:function(){GROW.$modal.find(".modal-header").length||$("<div/>",{"class":"modal-header"}).html('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3></h3>').appendTo(GROW.$modal),GROW.$modal.find(".modal-flash").length||$("<div/>",{"class":"modal-flash"}).appendTo(GROW.$modal),GROW.$modal.find(".modal-body").length||$("<div/>",{"class":"modal-body",id:"modal_body"}).appendTo(GROW.$modal)},update:function(e,t){t=t||{},GROW.modal.body(e,t),t.flash?GROW.modal.flash(t.flash):GROW.modal.clear_flash(),GROW.onpageload(),GROW.modal.show()},is_displayed:function(){return"false"==GROW.$modal.attr("aria-hidden")&&1!=GROW.$modal.data("hiding")},show:function(e,t){GROW.$modal.data("hiding",!1),e?GROW.modal.load(e,t):GROW.$modal.modal("show")},hide:function(e){e="undefined"!=typeof e?e:0,GROW.$modal.data("hiding",!0),setTimeout(function(){GROW.$modal.modal("hide"),GROW.$modal.data("hiding",!1)},1e3*e)}},GROW.info_panel={init:function(){GROW.$info_panel=$("<div/>",{id:"grow_info_panel","class":"grow_info_panel closed",tabindex:-1}).appendTo($("body")),GROW.$info_panel_close=function(){},$(document).on("click","[data-info-panel=true]",function(e){e.preventDefault(),GROW.info_panel.show($(this).attr("href"),{title:$(this).attr("title")})}).on("click","[data-dismiss=info_panel]",function(e){e.preventDefault(),GROW.info_panel.hide()})},load:function(e,t){t=t||{};var n=e.indexOf("?")!==-1?"&":"?",o=setTimeout(function(){GROW.info_panel.loading()},750);GROW.$info_panel.load(e+n+"layout=info_panel",function(){t.title!=undefined&&GROW.info_panel.title(t.title),t.flash!=undefined?GROW.info_panel.flash(t.flash):GROW.info_panel.clear_flash(),GROW.info_panel.loading(!1),clearTimeout(o),GROW.info_panel.show(),GROW.placeholder_labels("#grow_info_panel")})},loading:function(e){e="undefined"==typeof e||e,e?GROW.info_panel.body('<div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div>'):GROW.$info_panel.find(".progress").remove()},title:function(e){GROW.info_panel.stage(),GROW.$info_panel.find(".info_panel_header > h3").html(e)},flash:function(e){GROW.info_panel.stage(),GROW.$info_panel.find(".info_panel_flash").hide().html(e).slideDown()},clear_flash:function(){GROW.$info_panel.find(".info_panel_flash").html("")},body:function(e,t){t=t||{},t.title&&GROW.info_panel.title(t.title),t.flash&&GROW.info_panel.flash(t.flash),GROW.info_panel.stage(),GROW.$info_panel.find(".info_panel_body").html(e)},clear:function(e,t){t=t||{},GROW.info_panel.title(""),GROW.info_panel.body(""),GROW.info_panel.clear_flash()},stage:function(){GROW.$info_panel.find(".info_panel_header").length||$("<div/>",{"class":"info_panel_header"}).html('<button type="button" class="close" data-dismiss="info_panel" aria-hidden="true">&times;</button><h3></h3>').appendTo(GROW.$info_panel),GROW.$info_panel.find(".info_panel_flash").length||$("<div/>",{"class":"info_panel_flash"}).appendTo(GROW.$info_panel),GROW.$info_panel.find(".info_panel_body").length||$("<div/>",{"class":"info_panel_body",id:"info_panel_body"}).appendTo(GROW.$info_panel)},update:function(e,t){GROW.info_panel.body(e,t),t.flash?GROW.info_panel.flash(t.flash):GROW.info_panel.clear_flash(),GROW.onpageload(),GROW.info_panel.show()},is_displayed:function(){return 1!=GROW.$info_panel.hasClass("closed")},show:function(e,t){GROW.info_panel.stage(),e&&GROW.info_panel.load(e,t),GROW.$info_panel.removeClass("closed")},close:function(e){GROW.info_panel.hide(e)},hide:function(e){e="undefined"!=typeof e?e:0,setTimeout(function(){GROW.$info_panel.addClass("closed")},1e3*e),setTimeout(function(){GROW.info_panel.clear()},1e3),GROW.$info_panel_close()}},GROW.images={lazy_load:function(){var e=lozad(".lozad",{threshold:.1});e.observe()}},GROW.editor={init:function(e){try{"undefined"==typeof e&&(e=tinymce_init),GROW.editor.remove(),"undefined"!=typeof tinymce_init&&tinyMCE.init(e)}catch(e){console.log("Error loading editor.")}},remove:function(e){"undefined"==typeof e&&(e=".mceEditor"),tinyMCE.remove(e)}},GROW.code_editor={init:function(e,t){try{config={tabSize:2,lineNumbers:!0,lineWrapping:!0,foldGutters:!0,styleActiveLine:!0,autoCloseBrackets:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]},$.extend(config,t);var n=CodeMirror.fromTextArea(e,config);n.options.extraKeys={"Ctrl-M":function(e){e.options.keyMap="vim"}}}catch(e){console.log("Error loading code editor.")}},remove:function(e){var t=e.next(".CodeMirror")[0].CodeMirror;t.toTextArea()}},GROW.mention={source:function(e,t){$.getJSON("/search.json?search_for=User&q="+e,function(e){return t(e.results)})},insert:function(e){return'<a href="/users/'+e.id+'" data-user-id='+e.id+' class="mention_user quickviewable user_'+e.id+'">'+e.display_name+"</a>"},render:function(e){var t=e.display_name;return""!=e.tiny_image_url&&(t='<img src="'+e.tiny_image_url+'" class="select_content_image"> '+t),'<li><a href="javascript:;">'+t+"</a></li>"},renderDropdown:function(){return'<ul class="rte-autocomplete dropdown-menu"><li></li></ul>'}},GROW.tabs={init:function(){$(".tabs:not(.search-tabs, .editor-tabs, .video), [data-show-tab], .prev-tab, .next-tab").unbind(),$(".tabs:not(.search-tabs, .editor-tabs, .video)").easytabs({tabs:"> ul > li:not(.dropdown, .notab), > ul li.dropdown li:not(.dropdown, .notab)",animate:!1}).bind("easytabs:ajax:complete",function(){GROW.onpageload()}).bind("easytabs:after",function(evt,tab){$(this).find(".tab-content .active .map:not(.map-loaded)").length&&$(this).find(".tab-content .active .map:not(.map-loaded)").each(function(){GROW.map.load($(this))}),$(tab).attr("data-function")&&eval($(tab).attr("data-function"))}),GROW.tabs.weather(),setTimeout(function(){$("ul.nav-tabs > li > a.active").parent("li").addClass("active")},500),$("[data-show-tab]").click(function(){$(".tabs").easytabs("select","#"+$(this).data("show-tab"))}),$(".prev-tab").click(function(e){e.preventDefault(),GROW.tabs.prev($(this).parents(".tabs"))}),$(".next-tab").click(function(e){e.preventDefault(),GROW.tabs.next($(this).parents(".tabs"))})},weather:function(){$(".weather_tabs").easytabs({tabs:"> ul > li:not(.dropdown), > ul li.dropdown li",animate:!1,updateHash:!1}),$(".content-hourly-weather .tabs:not(.search-tabs, .video)").easytabs({updateHash:!1})},prev:function(e){var t=e.find(".nav-tabs li.active").prev();return t.length&&e.easytabs("select",t.find("a").attr("href")),!1},next:function(e){var t=e.find(".nav-tabs li.active").next();return t.length&&e.easytabs("select",t.find("a").attr("href")),!1}},GROW.tracking={start_view_counter:function(){"undefined"!=typeof GROW.current_view&&null!=GROW.current_view.id&&(view_interval=setInterval(function(){GROW.tracking.update_view_length()},3e4))},update_view_length:function(e,t){var n=new Date,o=new Date(GROW.current_view.created_at),a=new Date(GROW.current_visit.created_at);if("undefined"==typeof e)var e=Math.round((n-o)/1e3);if("undefined"==typeof t)var t=Math.round((n-a)/1e3);(e<=300||GROW.tracking.visitor_active())&&$.ajax({method:"POST",url:"/site_tracking/update_view",contentType:"application/json",dataType:"json",data:JSON.stringify({view_id:GROW.current_view.id,view_length:e,view_created_at:o,visit_id:GROW.current_visit.id,visit_length:t,visit_created_at:a})})},track_event:function(e,t){if("undefined"!=typeof e&&""!=e){if("undefined"==typeof t)var t={};t.view_id=GROW.current_view.id,t.visit_id=GROW.current_visit.id,t.visitor_id=GROW.current_visit.visitor_id,t.user_id=GROW.current_visit.user_id,$.ajax({method:"POST",url:"/site_tracking/event",contentType:"application/json",dataType:"json",data:JSON.stringify({name:e,options:t})})}},update_event:function(e,t){t.update=!0,GROW.tracking.track_event(e,t)},visitor_active:function(e){return"undefined"!=typeof e&&(visitor_active=e,visitor_active?$("body").addClass("visitor_active"):$("body").removeClass("visitor_active")),visitor_active},visitor_active_for:function(e){GROW.tracking.visitor_active(!0),"undefined"==typeof e&&(e=3e5),clearTimeout(visitor_active_timeout),visitor_active_timeout=setTimeout(function(){GROW.tracking.visitor_active(!1)},e)}},GROW.videojs={load:function(){$(".video-js:not(.vjs-user-active)").each(function(){if($(this).is(":visible")||$(this).is("audio")){var e=$(this).data("settings");$(this).data("stream")&&("Microsoft Internet Explorer"==navigator.appName||navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/rv 11/)||1==$.browser.msie)&&(e.techOrder=["flash","html5"]);var t=videojs(this,e),n=$(t.tagAttributes),o=$(t.el_).parents(".media_player_container"),a=o.data("content-type"),i=o.data("content-id"),r=a+"_"+i;t.on("firstplay",function(){n.attr("data-path")&&!t.autoplay()&&$.ajax(n.attr("data-path")+".js?log_only=true"),media_playing!=r&&GROW.tracking.track_event("media_playing",{content_type:a,content_id:i,details:{view_length:Math.round(t.currentTime()),finished:!1,streaming:o.data("content-streaming"),external:o.data("content-external")}}),media_playing=r}),t.on("playing",function(){GROW.tracking.visitor_active(!0)}),t.on("pause",function(){GROW.tracking.visitor_active(!1),"false"===o.data("content-streaming").toString()&&GROW.tracking.update_event("media_playing",{content_type:a,content_id:i,details:{view_length:Math.round(t.currentTime()),finished:!1,streaming:o.data("content-streaming"),external:o.data("content-external")}})}),t.on("ended",function(){GROW.tracking.visitor_active(!1),"false"===o.data("content-streaming").toString()&&GROW.tracking.update_event("media_playing",{content_type:a,content_id:i,details:{view_length:Math.round(t.currentTime()),finished:!0,streaming:o.data("content-streaming"),external:o.data("content-external")}})}),t.on("error",function(e){console.log("error",e),GROW.videojs.stream_reload(t)}),t.on("stalled",function(){n.attr("data-stream")&&setTimeout(function(){GROW.videojs.stream_reload(t)},5e3)}),t.on("loadeddata",function(){n.attr("data-path")&&t.autoplay()&&$.ajax(n.attr("data-path")+".js?log_only=true"),delete t.refresh_time})}})},reset:function(e){var t=videojs("#video_"+e+"_player");t.reset(),t.addClass("player_disabled")},stream_reload:function(e){e.refresh_time===undefined&&(e.refresh_time=1e3);var t=e.currentTime();setTimeout(function(){if(t==e.currentTime()&&!e.paused()){var n=$("#"+e.id()).find("source");$.ajax(n.attr("src"),{type:"GET",success:function(){e.src({src:n.attr("src"),type:n.attr("type")})},error:function(){e.refresh_time<16e3&&(e.refresh_time=2*e.refresh_time),GROW.videojs.stream_reload(e)}})}},e.refresh_time)}},GROW.video={listen_live_stream:function(){if(GROW.push.is_connected()&&$("#live_video_stream_area").length){GROW.push.client.subscribe("/streaming_video/current_video",function(e){$("#live_video_stream_area").html(e),GROW.videojs.load(),GROW.scroll_to.target("#live_video_stream_area")})}}},GROW.notice={outdated_browser:function(){$("body").addClass("outdated-browser"),"undefined"==typeof Cookies.get("outdated_browser_notice")&&(GROW.modal.show("/browser_notice"),Cookies.set("outdated_browser_notice","true",{expires:30}))}},GROW.votes={collect_objects:function(e){var t=e.map(function(){return $(this).data("vote-identifier")}).get();return t},load_counts:function(){var e=$("[data-vote-identifier]");e.length&&$.getJSON("/votes/vote_counts.json",{voteable:GROW.votes.collect_objects(e)},function(t){e.each(function(){var e=t[$(this).data("vote-identifier")];$.isEmptyObject(e)||("undefined"!=typeof e["true"]&&$(this).find(".like .vote_count").length&&$(this).find(".like .vote_count").text(function(t,n){return n.replace(/\d+/,e["true"])}),"undefined"!=typeof e["false"]&&$(this).find(".dislike .vote_count").length&&$(this).find(".dislike .vote_count").text(function(t,n){return n.replace(/\d+/,e["false"])}),"undefined"!=typeof e.score&&$(this).find(".voter_score .vote_count").length&&$(this).find(".voter_score .vote_count").text(function(t,n){var o=e.score;return o>=0&&(o="+"+o),n.replace(/[\d+-]+/,o)}))})})}}}(window.GROW=window.GROW||{},jQuery),function(e,t){e.select={no_select2:function(){t("body.mobile select.product_option").addClass("no-select2")},disable_autocomplete:function(){t("input.select2-input").attr("autocomplete",function(){return t(this).attr("id")})},load:function(){e.select.no_select2(),t("select").not(".select2-offscreen, .no-select2").select2({minimumResultsForSearch:"20",allowClear:!0,dropdownAutoWidth:!0,maximumSelectionSize:function(){return!!t(this).data("select-limit")&&t(this).data("select-limit")}}),t(".select2-user-select").not(".select2-offscreen").select2({minimumInputLength:3,allowClear:!0,ajax:{url:"/search.json",dataType:"json",quietMillis:500,data:function(e,n){return{search_type:"title",q:e,page:n,role_id:t(this).data("role-id"),role_name:t(this).data("role-name"),include_fields:t(this).data("include-fields"),result_id_field:t(this).data("result-id-field"),search_for:"User"}},results:function(e,t){var n={results:[]};return n.more=30*t<e.total_count,n.results=e.results,n}},formatResult:function(e){var t="";if(""!=e.tiny_image_url&&(t=t+'<img src="'+e.tiny_image_url+'" class="select_content_image"> '),t+=""!=e.name&&"undefined"!=typeof e.name?e.name:e.display_name,""!=e.location&&null!=e.location&&", "!=e.location&&"undefined"!=typeof e.location)try{t=t+'<span class="select_location select_details">'+e.location+"</span>"}catch(e){}return t},formatSelection:function(e){return""!=e.name&&"undefined"!=typeof e.name?e.name:e.display_name},initSelection:function(e,n){var o=t(e).val();n({id:o,name:t(e).attr("placeholder")})},escapeMarkup:function(e){return e}}),t(".select2-users-select").not(".select2-offscreen").select2({minimumInputLength:3,multiple:!0,allowClear:!0,id:function(e){return e.id+":"+e.display_name},ajax:{url:"/search.json",dataType:"json",quietMillis:500,data:function(e,n){return{q:e,page:n,role:t(this).data("role"),search_for:"User"}},results:function(e,t){var n={results:[]};return n.more=30*t<e.total_count,n.results=e.results,n}},formatResult:function(e){return""!=e.tiny_image_url?'<img src="'+e.tiny_image_url+'" class="select_content_image"> '+e.display_name:e.display_name},formatSelection:function(e){return e.display_name},initSelection:function(e,n){var o=[];t(e.val().split(",")).each(function(){var e=this.split(":");o.push({id:e[0],display_name:e[1]})}),n(o)},escapeMarkup:function(e){return e}}),t(".select2-photo-album-select").not(".select2-offscreen").select2({minimumInputLength:3,allowClear:!0,ajax:{url:"/admin/photo_albums.json",dataType:"json",quietMillis:250,data:function(e){return{q:e}},cache:!0,results:function(e){var n={results:[]};return t.each(e,function(e,t){n.results.push({id:t.id,text:t.title})}),n}},initSelection:function(e,n){var o=t(e).val();n({id:o,text:t(e).attr("placeholder")})},escapeMarkup:function(e){return e}}),t(".chat_recipient_user_id").not(".select2-offscreen").select2({allowClear:!0,ajax:{url:"/chat_sessions/members.json",dataType:"json",quietMillis:250,data:function(e,n){return{q:e,chat_session_id:t(this).data("chat-session-id"),page:n}},results:function(e,n){var o={results:[]};return o.more=30*n<e.total_count,t.each(e.results,function(e,t){o.results.push({id:t.id,text:t.display_name})}),o}},initSelection:function(e,n){var o=t(e).val();n({id:o,text:t(e).attr("placeholder")})},escapeMarkup:function(e){return e}}),t(".select2-category-type-select").not(".select2-offscreen").select2({minimumInputLength:3,allowClear:!0,ajax:{url:"/admin/categories/models.json",dataType:"json",quietMillis:250,data:function(e){return{q:e}},results:function(e){var n={results:[]};return t.each(e,function(e,t){n.results.push({id:t[0],text:t[1]})}),n}},initSelection:function(e,n){var o=t(e).val();n({id:o,text:t(e).attr("placeholder")})},escapeMarkup:function(e){return e}}),t("input.make_model_select").not(".select2-offscreen").select2({minimumInputLength:3,allowClear:!0,ajax:{url:"/search.json",dataType:"json",quietMillis:250,data:function(e,t){return{q:e,page:t,search_for:"VehicleModel"}},results:function(e,n){var o={results:[]};return o.more=30*n<e.total_count,t.each(e.results,function(e,t){o.results.push({id:t.display_name,display_name:t.display_name})}),o}},formatResult:function(e){return e.display_name},formatInputTooShort:function(){return"Type to search for your vehicle."},formatSelection:function(e){return e.display_name},initSelection:function(e,n){var o=t(e).val();n({id:o,display_name:o})},escapeMarkup:function(e){return e}}),t(".select2-site-select").not(".select2-offscreen").select2({allowClear:!0,ajax:{url:"/admin/sites/select.json",dataType:"json",quietMillis:250,data:function(e,n){return{q:e,scope_type:t(this).data("site-scope-type"),limit:30,page:n}},results:function(e,t){var n={results:[]};return n.more=30*t<e.total_count,n.results=e.results,n}},formatResult:function(e){return e.name},formatSelection:function(e){return e.name},initSelection:function(e,n){var o=t(e).val();n({id:o,name:t(e).attr("placeholder")})},escapeMarkup:function(e){return e}}),t(".select2-sites-select").not(".select2-offscreen").select2({multiple:!0,allowClear:!0,id:function(e){return e.id+":"+e.name},ajax:{url:"/admin/sites/select.json",dataType:"json",quietMillis:250,data:function(e,n){return{q:e,scope_type:t(this).data("site-scope-type"),limit:30,page:n}},results:function(e,t){var n={results:[]};return n.more=30*t<e.total_count,n.results=e.results,n}},formatResult:function(e){return e.name},formatSelection:function(e){return e.name},initSelection:function(e,n){var o=[];t(e.val().split(",")).each(function(){var e=this.split(":");o.push({id:e[0],name:e[1]})}),n(o)},escapeMarkup:function(e){return e}}),t(".select2-tag-select").not(".select2-offscreen").select2({tags:!0,tokenSeparators:[","],createSearchChoice:function(e,n){if(0===t(n).filter(function(){return 0===this.text.localeCompare(e)}).length)return{id:e,text:e}},multiple:!0,minimumInputLength:2,ajax:{url:"/tags.json",dataType:"json",quietMillis:500,data:function(e){return{search:e}},results:function(e){var n={results:[]};return t.each(e,function(e,t){n.results.push({id:t.name,text:t.name})}),n}},initSelection:function(e,n){var o=[];t(e.val().split(",")).each(function(){o.push({id:this,text:this})}),n(o)},escapeMarkup:function(e){return e}}),t(".select2-search-select").not(".select2-offscreen").select2({allowClear:!0,dropdownAutoWidth:!0,ajax:{url:"/search.json",dataType:"json",quietMillis:250,data:function(e,n){var o;o=t(this).attr("data-type")?t(this).attr("data-type"):t(this).attr("data-type-field")?t("#"+t(this).attr("data-type-field")).val():t(this).parents(".attachment").find("select.attachment-type").val();var a={search_type:t(this).data("search-type")||"title",q:e,page:n,include_fields:t(this).data("include-fields"),reorder:t(this).data("order"),search_for:o};return t(this).attr("data-categories")&&(a.categories=t(this).attr("data-categories")),t(this).attr("data-exclude-categories")&&(a.exclude_categories=t(this).attr("data-exclude-categories")),t(this).attr("data-date-field")&&(a.starts_at=t(t(this).attr("data-date-field")).val()),t(this).attr("data-date-offset")&&(a.date_offset=t(this).attr("data-date-offset"),a.search_type="search"),t(this).attr("data-registration")&&(a.registration=t(this).attr("data-registration")),t(this).attr("data-transfer")&&(a.transfer=t(this).attr("data-transfer")),t(this).attr("data-configurable")&&(a.configurable=t(this).attr("data-configurable")),t(this).attr("data-tags")&&(a.tags=t(this).attr("data-tags")),a},results:function(e,t){var n={results:[]};return n.more=30*t<e.total_count,n.results=e.results,n}},formatResult:function(e){var t="";if(""!=e.tiny_image_url&&(t=t+'<img src="'+e.tiny_image_url+'" class="select_content_image"> '),t+="User"==e.class_name&&""!=e.name?e.name:e.display_name,null!=e.location_name&&""!=e.location_name)try{t=t+'<span class="select_location_name select_details">'+e.location_name+"</span>"}catch(e){}var n=e.starts_at||e.created_at||e.publish_at;if(null!=n&&""!=n)try{var o=moment(n).format("MM/DD/YYYY [at] h:mm A");t=t+'<span class="select_starts_at select_details">'+o+"</span>"}catch(e){}if("User"==e.class_name&&""!=e.location&&", "!=e.location)try{t=t+'<span class="select_location select_details">'+e.location+"</span>"}catch(e){}if("EventRegistration"==e.class_name||"EventSpace"==e.class_name)if(""!=e.session_name&&null!=e.session_name&&", "!=e.session_name)try{
t=t+'<span class="select_session_name select_details">'+e.session_name+"</span>"}catch(e){}else if(null!=e.event_name&&", "!=e.event_name)try{t=t+'<span class="select_session_name select_details">'+e.event_name+"</span>"}catch(e){}if("Product"==e.class_name&&""!=e.subtitle&&null!=e.subtitle)try{t=t+'<span class="select_subtitle select_details">'+e.subtitle+"</span>"}catch(e){}if("PhotoAlbum"==e.class_name&&""!=e.photos_count&&null!=e.photos_count)try{t=t+'<span class="select_subtitle select_details">'+e.photos_count+" photos</span>"}catch(e){}return t},formatSelection:function(e){var t=e.display_name;return e.hasOwnProperty("subtitle")&&""!=e.subtitle&&null!=e.subtitle&&(t=t+" - "+e.subtitle),t},initSelection:function(e,n){var o=t(e).val();n({id:o,display_name:t(e).attr("placeholder")})},escapeMarkup:function(e){return e},loadMorePadding:150}).on("change",function(){var e=t(this).select2("data"),n=e.display_name;"Product"==e.class_name&&""!=e.subtitle&&null!=e.subtitle&&(n=n+" - "+e.subtitle),t(this).attr("placeholder",n)}),t(".select2-choice.select2-default").parents(".select2-container.content-detail-type").select2("destroy"),t(".select2.content-detail-type").not(".select2-container, .select2-offscreen").not(function(){return t(this).prev().hasClass("select2-container")}).select2({multiple:!1,createSearchChoice:function(e,n){if(0===t(n).filter(function(){return 0===this.text.localeCompare(e)}).length)return{id:e,text:e}},initSelection:function(e,n){var o=t(e).val();n({id:o,text:t(e).attr("placeholder")})},formatNoMatches:function(){return"Start typing to create a detail type."},ajax:{url:"/content_detail_types.json",dataType:"json",quietMillis:250,cache:!0,data:function(e){var n=t(this).data("content-type");return{title:e,content_type:n}},results:function(e){var n={results:[]};return t.each(e,function(e,t){n.results.push({id:t.title,text:t.title})}),n}},escapeMarkup:function(e){return e}}),t(".select2.content-detail-value").not(".select2-container, .select2-offscreen").not(function(){return t(this).prev().hasClass("select2-container")}).select2({multiple:!1,allowClear:!0,dropdownAutoWidth:!0,createSearchChoice:function(e,n){if(0===t(n).filter(function(){return 0===this.text.localeCompare(e)}).length)return{id:e,text:e}},initSelection:function(e,n){var o=t(e).val();n({id:o,text:t(e).attr("placeholder")})},formatNoMatches:function(){return"Start typing to create a new option."},ajax:{url:"/content_details/select_values.json",dataType:"json",quietMillis:250,cache:!0,data:function(e){var n=t(this).data("content-detail-type-id");return{q:e,content_detail_type_id:n}},results:function(e){var t={results:e.results};return t}},escapeMarkup:function(e){return e}}),t(".select2.url-type-select").not(".select2-container, .select2-offscreen").select2({allowClear:!0,minimumInputLength:2,multiple:!1,createSearchChoice:function(e,n){if(0===t(n).filter(function(){return 0===this.text.localeCompare(e)}).length)return{id:e,text:e}},initSelection:function(e,n){var o=t(e).val();n({id:o,text:t(e).attr("placeholder")})},ajax:{url:"/admin/short_urls.json",dataType:"json",quietMillis:250,cache:!0,data:function(e){return{url_type:e}},results:function(e){var n={results:[]},o=[];return t.each(e,function(e,a){a.url_type&&t.inArray(a.url_type,o)==-1&&(n.results.push({id:a.url_type,text:a.url_type}),o.push(a.url_type))}),n}},escapeMarkup:function(e){return e}}),t(".select2.registration_sessions_list").not(".select2-container, .select2-offscreen").select2({tags:[],tokenSeparators:[","],multiple:!0,initSelection:function(e,n){var o=[];t(e.val().split(",")).each(function(){o.push({id:this,text:this,locked:!0})}),n(o)},formatNoMatches:function(){return"Start typing to create registration sessions."},escapeMarkup:function(e){return e}}),t(".select2-choice.select2-default").parents(".select2-container.product-variant-type").select2("destroy"),t(".select2.product-variant-type").not(".select2-container, .select2-offscreen").not(function(){return t(this).prev().hasClass("select2-container")}).select2({multiple:!1,createSearchChoice:function(e,n){if(0===t(n).filter(function(){return 0===this.text.localeCompare(e)}).length)return{id:e,text:e}},initSelection:function(e,n){var o=t(e).val();n({id:o,text:t(e).attr("placeholder")})},formatNoMatches:function(){return"Start typing to create an option type."},ajax:{url:"/product_variant_types.json",dataType:"json",quietMillis:250,cache:!0,data:function(e){return{title:e}},results:function(e){var n={results:[]};return t.each(e,function(e,t){n.results.push({id:t.title,text:t.title})}),n}},escapeMarkup:function(e){return e}}),t(".select2-choice.select2-default").parents(".select2-container.product-variant-type-value-list").select2("destroy"),t(".select2.product-variant-type-value-list").not(".select2-container, .select2-offscreen").select2({tags:[],tokenSeparators:[","],createSearchChoice:function(e,n){if(0===t(n).filter(function(){return 0===this.text.localeCompare(e)}).length)return{id:e,text:e}},multiple:!0,minimumInputLength:2,initSelection:function(e,n){var o=[];t(e.val().split(",")).each(function(){o.push({id:this,text:this})}),n(o)},escapeMarkup:function(e){return e}}),t(".select2-choice.select2-default").parents(".select2-container.content-detail-type-option-list").select2("destroy"),t(".select2.content-detail-type-option-list").not(".select2-container, .select2-offscreen").select2({tags:[],tokenSeparators:[","],minimumInputLength:2}),t(".select2.product-variant-type-value-list").select2("container").find("ul.select2-choices").sortable({nested:!1,vertical:!1,exclude:".select2-search-field",itemSelector:"li.select2-search-choice",placeholder:'<li class="select2-search-choice placeholder"/>',onDragStart:function(e,n,o,a){t(".select2.product-variant-type-value-list").select2("onSortStart"),o(e,n,o,a)},onDrop:function(e,n,o,a){t(".select2.product-variant-type-value-list").select2("onSortEnd"),o(e,n,o,a)}}),t(".allowed_api_domains").not(".select2-container, .select2-offscreen").select2({tags:[],tokenSeparators:[","],multiple:!0,initSelection:function(e,n){var o=[];t(e.val().split(",")).each(function(){o.push({id:this,text:this})}),n(o)},formatNoMatches:function(){return"Start typing domain names."},escapeMarkup:function(e){return e}}),t(".content_detail_type_textfield.multiple").not(".select2-offscreen").select2({tags:[],tokenSeparators:[","],minimumInputLength:2,maximumSelectionSize:function(){return!!t(this).data("select-limit")&&t(this).data("select-limit")}}),t(".select2-transfer-user").not(".select2-offscreen").select2({minimumInputLength:3,allowClear:!0,ajax:{url:function(){return"/events/"+t(this).data("event-id")+"/entry_list?transfer=true"},dataType:"json",quietMillis:250,data:function(e,t){return{queries:{name:e},page:t}},results:function(e,t){var n={results:[]};return n.more=30*t<e.total_count,n.results=e,n}},formatResult:function(e){var t="";return""!=e.name&&"undefined"!=typeof e.name&&(t+=e.name),t},formatSelection:function(e){if(""!=e.name)return e.name},initSelection:function(e,n){var o=t(e).val();n({id:o,name:t(e).attr("placeholder")})},escapeMarkup:function(e){return e}}),navigator.userAgent.match(/Chrome/)&&e.select.disable_autocomplete()}}}(window.GROW=window.GROW||{},jQuery),function(e,t){e.checkout={update:function(e){e.stopImmediatePropagation();var n=t("form.edit_order");t(".checkout_form form.edit_order .order_addresses select").select2("readonly",!0),n.find("#order_coupon_code").prop("readonly",!0),t.ajax({type:"POST",url:n.attr("action"),data:n.serialize()+"&"+t.param({validate:!1}),dataType:"script"})}}}(window.GROW=window.GROW||{},jQuery),function(e,t){e.product_designs={update_price:function(){var e=parseFloat(t("#design_price").data("base-price"));t(".config_option_fields").each(function(){e+=parseFloat(t(this).data("option-price"))}),t("#design_price").text("$"+parseFloat(e,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString())}}}(window.GROW=window.GROW||{},jQuery),$(function(){$("#design_price").length&&GROW.product_designs.update_price()}),function(e){e.isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}}}(window.GROW=window.GROW||{},jQuery),function(e,t){e.content_collections={load:function(n,o){if("undefined"!=typeof o.content_url)var a=o.content_url;else var a="/content";var i=n.data("collection-options")||{},r=Object.assign(i,o);"undefined"==typeof r.layout&&(r.layout="none"),"undefined"==typeof r.page&&(r.page=1),r.remote_url&&(a=r.remote_url);var s=a.indexOf("?")!==-1?"&":"?";a=a+s+t.param(r);n.find(".content-items-wrapper");n.load(a+" .content-collection > *",function(a,i){if("error"==i)console.log("Collection load error");else if(e.onpageload(),n.data("loaded",!0),n.parents("#content").length&&1==t("#content .content-collection").length){var r=window.location.href.split("?")[0];if(""==window.location.search)var s={};else var s=t.getQueryParameters();"undefined"!=typeof s.page&&delete s.page,s.content_filter=o.content_filter,"undefined"!=typeof o.query&&""!=o.query&&(s.query=o.query),r=r+"?"+t.param(s),history.pushState({},"",r)}})}}}(window.GROW=window.GROW||{},jQuery),$(function(){});var quickview_open,quickview_close;!function(e,t){e.quickview={selector:".quickviewable, .content-item[data-user-id] .content-image a, .content-item[data-user-id] .heading a",enable:function(){e.quickview.disable(),t(document).on("mouseenter",e.quickview.selector,function(n){t(this).parents(".quickview").length||e.quickview.show(t(this),n)}).on("mouseleave",e.quickview.selector,function(n){t(this).parents(".quickview").length||e.quickview.hide(t(this),n)}),t(document).on("mouseenter",".quickview",function(){clearTimeout(quickview_close)}).on("mouseleave",".quickview",function(){e.quickview.hide()})},show:function(n,o){if(n.hasClass("quickviewable"))var a=n.attr("class").match("user_([0-9]*)")[1];else if(n.parents(".content-item[data-user-id]").length)var a=n.parents(".content-item[data-user-id]").data("user-id");""!=a&&(e.quickview.hideall(),quickview_open=setTimeout(function(){if(t("#quickview_"+a).length&&""!=t("#quickview_"+a).html())var i=t("#quickview_"+a);else{var i=t("<div/>",{id:"quickview_"+a,"class":"quickview"}),r=t("<div/>",{"class":"content"}),s=t("<img/>",{src:"https://dk1xgl0d43mu1.cloudfront.net/static_assets/images/spinner.gif","class":"spinner"});i.hide(),r.append(s),i.append(r),t("body").append(i),r.load("/users/"+a+"/quickview?layout=none",function(){})}e.quickview.setPosition(i,n,o),i.fadeIn()},1e3))},setPosition:function(e,t,n){var o=e.outerWidth()+20,a=e.outerHeight()+15,i=n.pageX+5,r=n.pageY+5,s=e.offset(),c=s.left+window.innerWidth,l=s.top+window.innerHeight,d=c-(i+o),u=l-(r+a);d<0&&(i=i+d-(d+o)),u<0&&(r=r+u-(u+a)),e.css({left:i+"px",top:r+"px"})},hide:function(){clearTimeout(quickview_open),quickview_close=setTimeout(function(){e.quickview.hideall()},400)},hideall:function(){clearTimeout(quickview_close),t(".quickview").hide()},disable:function(){t(e.quickview.selector).unbind("mouseenter mouseleave"),t(".quickview").unbind("mouseenter mouseleave")}}}(window.GROW=window.GROW||{},jQuery),function(e,t){e.minicolors={init:function(){t("[data-minicolors]").each(function(){var e=t(this);e.minicolors(e.data("minicolors"))})}}}(window.GROW=window.GROW||{},jQuery);var maps={},map_bounds_timeout;!function(e,t){var n="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",o="&copy; OpenStreetMap contributors";e.map={init:function(){t(".map:not(.map-loaded)").each(function(){var n=t(this);"undefined"!=typeof L&&"undefined"!=typeof L.markerClusterGroup&&(n.data("lat")||n.data("lat")||n.data("markers")||n.data("url"))&&(n.data("delay")||e.map.load(n))})},load:function(n){if(n.addClass("map-loaded"),n.data("url")&&"listen"!=n.data("bounds"))t.getJSON(n.data("url"),function(t){var o=e.map.render_map(n);e.map.load_json(o,t)});else{e.map.render_map(n)}},render_map:function(a){var i=a.get(0),r=a.data("zoom")||3,s=a.data("min-zoom")||2,c=a.data("max-zoom")||18,l=a.data("lat")||36.303419,d=a.data("lng")||-55.3795,u=a.data("center")||[l,d],p=a.data("fit-markers")||!1;a.html("");var _=L.map(i.id,{center:u,zoom:r,minZoom:s,maxZoom:c});if("undefined"!=typeof _&&(maps[i.id]={map:_}),L.tileLayer(n,{attribution:o}).addTo(_),a.data("markers")){var m=window[a.data("markers")];e.map.load_markers(_,m,p)}if(_.on("mouseover",function(e){var n=t(e.target.getContainer()),o=n.attr("data-fit-markers");"false"!=o&&(n.attr("data-fit-markers",!1),n.attr("data-fit-markers-original",!0))}),_.on("mouseout",function(e){var n=t(e.target.getContainer()),o=n.attr("data-fit-markers-original");"true"==o&&n.attr("data-fit-markers",o)}),"listen"==a.data("bounds")&&(e.map.bounds_listener(_),_.on("moveend",function(){e.map.bounds_listener(_)})),a.data("refresh")){var f=e.map.get_objects(i.id);try{clearInterval(f.refresh_interval)}catch(e){}f.refresh_interval=setInterval(function(){e.map.refresh(_)},1e3*a.data("refresh"))}return _},refresh:function(n){var o=t(n.getContainer());t.getJSON(o.data("url"),function(t){e.map.load_json(n,t)})},load_markers:function(n,o){if("undefined"!=typeof o){var a=(t(n.getContainer()),L.markerClusterGroup());o.forEach(function(e){L.marker(e.latlng).bindPopup(e.popup).addTo(a)}),a.addTo(n),e.map.store_markers(n,a),e.map.zoom_markers(n,a)}},load_json:function(t,n){var o=!1;try{o=n.features[0].properties.hasOwnProperty("scale")}catch(e){}o?e.map.load_areas(t,n):e.map.load_point_clusters(t,n)},load_point_clusters:function(n,o){e.map.clear_markers(n);var a=(t(n.getContainer()),L.markerClusterGroup()),i=L.geoJson(o,{onEachFeature:function(e,t){var n="";if(null!=e.properties.url){if(null!=e.properties.page_title)var o=e.properties.page_title;else var o=e.properties.url;n='<a href="http://'+e.properties.domain+e.properties.url+'" target="_blank">Page: '+o+"</a>"}else n='<a href="/admin/users/'+e.properties.id+'" target="_blank">'+e.properties.name+"</a>";""!=n&&t.bindPopup("<h5>"+n+"</h5>")}});a.addLayer(i),n.addLayer(a),e.map.store_markers(n,a),e.map.zoom_markers(n,a)},load_areas:function(t,n){e.map.clear_markers(t);for(var o=L.layerGroup(),a=0;a<n.features.length;a++){var i=n.features[a];try{var r=L.circle([i.geometry.coordinates[1],i.geometry.coordinates[0]],{color:"#f00",weight:1,fillColor:"#f00",fillOpacity:.5,radius:i.properties.scale/t.getZoom()});r.addTo(o)}catch(e){}}o.addTo(t),e.map.store_markers(t,o)},bounds_listener:function(n){clearTimeout(map_bounds_timeout),map_bounds_timeout=setTimeout(function(){var o=t(n.getContainer()),a=o.data("url"),i=e.map.get_bounds_filters(n),r=e.map.get_precision(n),s=t.param({filters:{geo_bounds:i,precision:r}});t.getJSON(a+"&"+s,function(t){e.map.load_json(n,t)})},1e3)},get_objects:function(e){return maps[e]},store_markers:function(e,t){maps[e.getContainer().id].markers=t},clear_markers:function(t){var n=t.getContainer().id,o=e.map.get_objects(n).markers;"object"==typeof o&&"function"==typeof o.clearLayers&&o.clearLayers()},get_bounds_filters:function(e){var t=e.getBounds(),n={};return n.top_left=[t.getNorthEast().lat,t.getSouthWest().lng],n.bottom_right=[t.getSouthWest().lat,t.getNorthEast().lng],n},get_precision:function(e){var t=e.getZoom();if(t<8)var n=Math.floor(t/1.9);else var n=t;return n<=0&&(n=1),n>12&&(n=12),n},zoom_markers:function(e,n){var o=t(e.getContainer());o.data("lat")||o.data("lng")||"false"==o.attr("data-fit-markers")||e.fitBounds(n.getBounds(),{padding:[10,10]})}}}(window.GROW=window.GROW||{},jQuery),function(e){e.themes={init:function(){}}}(window.GROW=window.GROW||{},jQuery),$(function(){$(document).on("click",".control-group.theme_color_palette a.theme-color-palette-option",function(e){e.preventDefault();var t=$(this);$form=t.parents("form"),$form.find("#theme_color_palette").val(t.data("color-palette")),$form.find("#theme_background_color").minicolors("value",{color:t.data("background-color")}),$form.find("#theme_header_color").minicolors("value",{color:t.data("header-color")}),$form.find("#theme_footer_color").minicolors("value",{color:t.data("footer-color")}),$form.find("#theme_text_color").minicolors("value",{color:t.data("text-color")}),$form.find("#theme_link_color").minicolors("value",{color:t.data("link-color")}),$form.find("#theme_link_hover_color").minicolors("value",{color:t.data("link-hover-color")}),$form.find("#theme_navigation_link_color").minicolors("value",{color:t.data("link-navigation-link-color")}),t.parents(".control-group").find(".btn-group a.dropdown-toggle .toggle-text").html(t.html())}).on("click",".theme.content-item > .content-image",function(e){e.preventDefault(),$.ajax({url:"/themes/"+$(this).parents(".content-item[data-content-id]").data("content-id")+"/preview",dataType:"script"})})}),function(e,t){e.country={init:function(t){t.length&&e.country.set_body(t)},set_body:function(e){t("body").addClass("country_"+e.toLowerCase()),"US"!=e&&t("body").addClass("international")}}}(window.GROW=window.GROW||{},jQuery);var $j=jQuery;$(function(){GROW.init()});